<html>
<head>
	<title>CS 4331-002: Project 1</title>
	<meta name="description" content="Simon Woldemichael's CS 4331-002 Special Topics in CS: Virtual Reality - Project 1">
	<meta name="keywords" content="Virtual,Reality,Project">
	<meta name="author" content="Simon Woldemichael">
	
	<!--Include a-frame-->
    <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
	
	<!--Include resonance dependencies-->
	<script src="https://cdn.jsdelivr.net/npm/resonance-audio/build/resonance-audio.min.js"></script>
	<script src="libs/res-room.js"></script>
	
	<!--Include a-frame extras plugin-->
	<script src="http://cdn.rawgit.com/donmccurdy/aframe-extras/v3.13.1/dist/aframe-extras.min.js"></script>
	
	<!--Include helper script for skybox-->
	<script src="libs/sky.js"></script>
</head>

<body>
	<!--Inlude helper script to position the sun-->
	<script src="utils/sunSetter.js"></script>
	
	<!--Create a scene-->
	<!--Running off of the map causes you to float away-->
	<a-scene stats physics="gravity: -10; debug: false">

		<!--Load assets early-->
		<a-assets>
			<img src="images/grid.png" id="grid" crossorigin="anonymous">
			<img src="images/floor.jpg" id="floor" crossorigin="anonymous">
			<img src="images/ceiling.jpg" id="ceiling" crossorigin="anonymous">
			<img src="images/grass.jpg" id="grass" crossorigin="anonymous">
			<img src="images/wall-texture.jpg" id="wall-texture" crossorigin="anonymous">
			<img src="images/wallpaper.jpg" id="wall" crossorigin="anonymous">
			<img src="images/space.jpg" id="skyTex" crossorigin="anonymous">
			<img src="images/poster.jpeg" id="poster" crossorigin="anonymous">
			<a-asset-item id="bed" src="models/bed/scene.gltf">
			<a-asset-item id="dog" src="models/dog/scene.gltf">
			<a-asset-item id="tree" src="models/tree/scene.gltf">
			<a-asset-item id="table" src="models/table/scene.gltf">
			<a-asset-item id="pool-table" src="models/pool-table/scene.gltf">
			<a-asset-item id="computer" src="models/computer/scene.gltf">
			<a-asset-item id="radio" src="models/radio/scene.gltf">
			<a-asset-item id="phone" src="models/phone/scene.gltf">
			<a-asset-item id="camera-drone" src="models/camera-drone/scene.gltf">
			<a-asset-item id="car" src="models/car/scene.gltf">
			<a-asset-item id="couch" src="models/couch/scene.gltf">
			<a-asset-item id="crt-tv" src="models/crt-tv/scene.gltf">
			<a-asset-item id="gamecube" src="models/gamecube/scene.gltf">
			<a-asset-item id="echo" src="models/echo/scene.gltf">
		</a-assets>
		
		<!--The sky that exists outside of the sphere that houses a skybox-->
		<a-sky src="#skyTex" repeat="1 1"></a-sky>
		
		<!--Load the sky and bind the sunSetter to it-->
		<a-entity id="sky" geometry="primitive: sphere; radius: 200;" material="shader: sky; side: back" sun-position-setter>
			<!--Position the sun-->
			<a-entity id="orbit">
				<a-animation attribute="rotation" from="0 0 0" to="0 90 0" dur="1" repeat="1"></a-animation>
			</a-entity>
		</a-entity>
		
		<!--Position an entity to house the camera-->
		<!--kinematic-body is not compatible with "acceleration"-->
		<a-entity position="21.22 0 -0.72" rotation="-15.8 98.66 0" camera="userHeight: 1.6" universal-controls kinematic-body>
			<!--Define a raycaster to track the position of the mouse (i.e. where the user is looking-->
			<a-entity raycaster="far: 150; objects: .intersectable" cursor geometry="primitive: ring; radiusOuter: 0.015;
							  radiusInner: 0.01; segmentsTheta: 32" material="color: #283644; shader: flat" position="0 0 -0.75"></a-entity>
		</a-entity>
		
		<!--Plane to prevent physics objects from falling through the map-->
		<a-plane static-body position="0 0 0" rotation="-90 0 0" width="100" height="100" depth="1" material="src: #grass; side: double; repeat: 100 100;"></a-plane>	
		
		<!--Begin building the scene of home-->
		<a-entity scale=".5 .5 .5">
			<!-- Floor and ceiling-->
			<a-plane id="floor" material="src: #floor; side: double; repeat: 1 1" height="50" width="50" position="0 .01 0" rotation="-90 0 0"></a-plane>
			<a-plane id="ceiling" material="src: #wall; side: double; repeat: 1 1" height="50" width="50" position="0 13 0" rotation="-90 0 0"></a-plane>
			
			<!--Walls that make up the perimeter of the house and cannot be walked through-->
			<a-box material="src: #wall; side: double;" width="15" height="15" depth="1" position=".255 5.954 -24.8" scale="3.3 .928 .497" static-body></a-box>
			<a-box material="src: #wall; side: double;" width="15" height="15" depth="1" position=".255 5.954 24.8" scale="3.3 .928 .497" static-body></a-box>
			<a-box material="src: #wall; side: double;" width="15" height="15" depth="1" position="-24.7 5.896 -0.21" rotation="0 90 0" scale="3.3 .928 .497" static-body></a-box>
			<a-box material="src: #wall; side: double;" width="7.5" height="15" depth="1" position="24.78 5.966 15.570" rotation="0 90 0" scale="2.516 .928 .497" static-body></a-box>
			<a-box material="src: #wall; side: double;" width="7.5" height="15" depth="1" position="24.78 5.966 -15.570" rotation="0 90 0" scale="2.516 .928 .497" static-body></a-box>
			<a-box material="src: #wall; side: double;" width="7.5" height="15" depth="1" position="24.78 9.628 0.040" rotation="0 90 0" scale="1.638 .437 .497" static-body></a-box>
					 
			 <!--Walls that make up the inner area of the house-->
			 <a-box material="src: #wall; side: double;" width="7.5" height="15" depth="1" position=".255 5.954 12.11" rotation="0 90 0" scale="3.3 .928 .497" static-body></a-box>
			 <a-box material="src: #wall; side: double;" width="7.5" height="15" depth="1" position="-9.03 5.966 -.10" rotation="0 0 0" scale="2.516 .928 .497" static-body></a-box>
			 <a-box material="src: #wall; side: double;" width="7.5" height="15" depth="1" position="-21.4 10.02 -.10" rotation="0 0 0" scale=".8 .391 .392" static-body></a-box>
		</a-entity>
		
		<!--Resonant body that plays positional sound!-->
		<a-resonance-room src-position="-10.8 .956 -10.2" src="audio/87.mp3" loop="true", autoplay="true", width="4" height="3" depth="3.8" helper="false"><a-resonance-room>
		<!--Put a bounding box around the audio player. Weird glitch where the user teleports off of the map without it-->
		
		<!--Models for the inside of the house-->
		<a-entity gltf-model="#bed" position="-9.12 0 8.232" rotation="0 90 0" scale=".06 .06 .06"></a-entity>
		<a-entity gltf-model="#table" position="-1.48 0 10.01" rotation="0 90 0"></a-entity>
		<a-entity gltf-model="#table" position="-10.9 0 -10.1" rotation="0 90 0"></a-entity>
		<a-entity gltf-model="#computer" position="-1.48 1.333 10.01" rotation="0 270 0" scale=".001 .001 .001"></a-entity>
		<a-entity gltf-model="#echo" position="-11.6 0 3.758" rotation="0 90.35 0" scale=".245 .245 .245"></a-entity>
		<a-entity gltf-model="#pool-table" position="-4.7 -1.5 1.643" rotation="0 90 0" scale=".024 .029 .029"></a-entity>
		<a-entity gltf-model="#radio" position="-11.2 .956 -9.7" rotation="0 -90 0" scale=".015 .015 .015"></a-entity>
		<a-entity gltf-model="#phone" position="-1.48 .924 9.331" rotation="0 -33 0" scale=".05 .05 .05"></a-entity>
		<a-entity gltf-model="#couch" position="6.083 0 2.446" rotation="0 -90 0" scale=".504 .504 .504"></a-entity> 
		<a-entity gltf-model="#crt-tv" position="6.083 0 10.31" rotation="0 180 0" scale="1 1 1"></a-entity>
		<a-entity gltf-model="#gamecube" position="4.134 0 10.18" rotation="0 180 0" scale=".022 .022 .022 "></a-entity>
		<a-box material="src: #poster; side: double; repeat: 1 1" width="16" height="22" depth="1" position=".215 3.163 5.121" rotation="0 -90 0" scale=".170 .170 .170" static-body></a-box>
		
		<!--Models for the outside of the house-->
		<!--Sideyard swimming pool with wave generator-->
		<a-ocean width="20" depth="10" density="40" position="0 .25 40"></a-ocean>
		
		<a-entity gltf-model="#tree" position="8 0 40" rotation="0 90 0" scale=".05 .05 .05"></a-entity>
		<a-entity gltf-model="#camera-drone" position="-13.6 7.209 41.24" rotation="-.22 -2.57 -37.7" scale=".005 .005 .005"></a-entity>
		<a-entity gltf-model="#car" position=".212 0 17.87" rotation="0 90 0"></a-entity>
		
		<!--Last model is a dynamic object-->
		<a-entity gltf-model="#dog" position="0 0 40" rotation="0 270 0" scale=".0015 .0015 .0015">
			<a-animation attribute="rotation" dur="1000" from="0 270 0" to = "0 -270 0" repeat="indefinite"></a-animation>
		</a-entity>
	</a-scene>
</body>
</html>
